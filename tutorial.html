<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<meta name="author" content="Romain BOYRIE">
<title>Optimization and mastery in programming</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<style>
/*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
.tabs {
    margin-bottom: 1.25em;
}

.tablist > ul {
    display: flex;
    flex-wrap: wrap;
    list-style: none;
    margin: 0;
    padding: 0;
}

.tablist > ul li {
    align-items: center;
    background-color: #fff;
    cursor: pointer;
    display: flex;
    font-weight: bold;
    line-height: 1.5;
    padding: 0.25em 1em;
    position: relative;
}

.tablist > ul li:focus-visible {
    outline: none;
}

.tablist.ulist,
.tablist.ulist > ul li {
    margin: 0;
}

.tablist.ulist > ul li + li {
    margin-left: 0.25em;
}

.tabs .tablist li::after {
    content: "";
    display: block;
    height: 1px;
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
}

.tabs.is-loading .tablist li:not(:first-child),
.tabs:not(.is-loading) .tablist li:not(.is-selected) {
    background-color: #f5f5f5;
}

.tabs.is-loading .tablist li:first-child::after,
.tabs:not(.is-loading) .tablist li.is-selected::after {
    background-color: #fff;
}

/*
.tabs:not(.is-loading) .tablist li,
.tabs:not(.is-loading) .tablist li::after {
  transition: background-color 200ms ease-in-out;
}
*/

.tablist > ul p {
    line-height: inherit;
    margin: 0;
}

.tabpanel {
    background-color: #fff;
    padding: 1.25em;
}

.tablist > ul li,
.tabpanel {
    border: 1px solid #dcdcdc;
}

.tablist > ul li {
    border-bottom: 0;
}

.tabs.is-loading .tabpanel + .tabpanel,
.tabs:not(.is-loading) .tabpanel.is-hidden {
    display: none;
}

.tabpanel > :first-child {
    margin-top: 0;
}

/* #content is a signature of the Asciidoctor standalone HTML output */
#content .tabpanel > :last-child,
#content .tabpanel > :last-child > :last-child,
#content .tabpanel > :last-child > :last-child > li:last-child > :last-child {
    margin-bottom: 0;
}

.tablecontainer {
    overflow-x: auto;
}

#content .tablecontainer {
    margin-bottom: 1.25em;
}

#content .tablecontainer > table.tableblock {
    margin-bottom: 0;
}
</style>
</head>
<body class="article">
<div id="header">
<h1>Optimization and mastery in programming</h1>
<div class="details">
<span id="author" class="author">Romain BOYRIE</span><br>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_write_clean_code">Write clean code</a>
<ul class="sectlevel2">
<li><a href="#_limit_yourself_to_useful_comments">Limit yourself to useful comments</a></li>
<li><a href="#_a_function_does_only_one_thing_but_well">A function does only one thing, but well</a></li>
<li><a href="#_object_programming_allows_you_to_encapsulate_complexity">Object programming allows you to encapsulate complexity</a></li>
<li><a href="#_give_sensible_names_to_variables_and_parameters">Give sensible names to variables and parameters</a></li>
<li><a href="#_indent_your_code">Indent your code</a></li>
</ul>
</li>
<li><a href="#_in_the_python_code">In the Python code</a>
<ul class="sectlevel2">
<li><a href="#_delete_unused_variables">Delete unused variables</a></li>
<li><a href="#_do_not_write_exceptions_without_an_error_type">Do not write exceptions without an Error type</a></li>
<li><a href="#_avoid_writing_infinite_loops">Avoid writing infinite loops</a></li>
<li><a href="#_writing_unit_tests">Writing unit tests</a></li>
<li><a href="#_using_mypy_to_type_variables">Using mypy to type variables</a></li>
<li><a href="#_indenting_your_code_with_the_black_library">Indenting your code with the black library</a></li>
<li><a href="#_do_not_code_a_shallow_copy_if_a_deep_copy_is_necessary">Do not code a shallow copy, if a deep copy is necessary.</a></li>
</ul>
</li>
<li><a href="#_in_the_sql_code">In the SQL code</a>
<ul class="sectlevel2">
<li><a href="#_correctly_type_the_columns_according_to_the_data">Correctly type the columns according to the data</a></li>
<li><a href="#_do_not_insert_an_order_by_if_it_is_not_useful">Do not insert an Order By if it is not useful</a></li>
</ul>
</li>
<li><a href="#_in_hardware">In hardware</a>
<ul class="sectlevel2">
<li><a href="#_measuring_program_consumption">Measuring program consumption</a></li>
</ul>
</li>
<li><a href="#_the_developers_posture_without_curvature">The developer&#8217;s posture without curvature</a>
<ul class="sectlevel2">
<li><a href="#_avoid_taking_your_hands_off_the_keyboard">Avoid taking your hands off the keyboard</a></li>
<li><a href="#_learn_an_ergonomic_keyboard_layout">Learn an ergonomic keyboard layout</a></li>
</ul>
</li>
<li><a href="#_using_a_static_code_analysis_tool">Using a static code analysis tool</a>
<ul class="sectlevel2">
<li><a href="#_qodana">Qodana</a></li>
<li><a href="#_sonarlint">Sonarlint</a></li>
</ul>
</li>
<li><a href="#_conclusion">Conclusion</a></li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This document is intended to be a compilation of a set of tips for
developing by giving your
maximum potential, in Python, SQL and in
cloud application development.</p>
</div>
<div class="paragraph">
<p>In addition, a part will focus on the
developer&#8217;s posture, with tips and advice on workstation ergonomics.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_write_clean_code">Write clean code</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_limit_yourself_to_useful_comments">Limit yourself to useful comments</h3>
<div class="paragraph">
<p>There are pros and cons of
comments, but overall,
when you are new to a project
reading comments makes it easier
to understand the code and is a driving force
in integrating into the team.</p>
</div>
<div class="paragraph">
<p>The dosage of the comment remains an
essential element of its usefulness. Indeed, the comment serves to compensate
for the complexity of the code. On the other hand,
it becomes tiresome to read verbose comments, if the reading of the code is sufficiently clear.</p>
</div>
<div class="paragraph">
<p>Although there is a difference
in the assessment of the usefulness
of the comment, between a junior and
a senior, a basic rule can be used
to decide when to insert a comment,
but it is up to you to define it, although
we give some clues below.</p>
</div>
<div class="paragraph">
<p>Besides the fact that adding a description
to each function (in Python it is a docstring), adding a comment
should not compensate for a lack of
meaning in the naming of variables. Just know that your comments can integrate your unit tests and therefore be particularly useful in the evolutions/maintenance of your code, especially if it is not you who modifies it.</p>
</div>
<div class="paragraph">
<p>Finally, the construction of the code, the choice of a design pattern, the good
naming of functions, parameters
and variables could make comments useless, except that comments will often help you write supported documentation, etc.</p>
</div>
</div>
<div class="sect2">
<h3 id="_a_function_does_only_one_thing_but_well">A function does only one thing, but well</h3>
<div class="paragraph">
<p>Here is a rule that eliminates complexity and allows to calibrate
its function to its action.</p>
</div>
<div class="paragraph">
<p>In the following example, the code is presented either in an expanded form or in a factored form.</p>
</div>
<div class="paragraph">
<p>If the call to the function remains identical, each step of the program
calls a single function.</p>
</div>
<div class="paragraph">
<p>Although the code has more
lines when it is factored, it will be easier to debug and maintain.</p>
</div>
<div class="listingblock">
<div class="title">Developed code</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">string</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">encryption</span>(message, cypher):
    <span style="color:#D42"><span style="color:black">&quot;&quot;&quot;</span><span>Returns an encrypted message</span><span style="color:black">&quot;&quot;&quot;</span></span>
    char_list = string.printable
    char_dict = {y:x <span style="color:#080;font-weight:bold">for</span> x,y <span style="color:#080;font-weight:bold">in</span> <span style="color:#369;font-weight:bold">enumerate</span>(char_list)}
    modulo = <span style="color:#369;font-weight:bold">len</span>(char_list)
    crypted_message = []
    <span style="color:#080;font-weight:bold">for</span> char <span style="color:#080;font-weight:bold">in</span> message:
        token = char_list[(char_dict[char] + cypher) % modulo]
        crypted_message.append(token)
    <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#710">'</span></span>.join(crypted_message)
&gt;&gt;&gt; encryption(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">I love Python</span><span style="color:#710">&quot;</span></span>, <span style="color:#00D">123456789</span>)
<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">yV</span><span style="color:#b0b">\x0c</span><span style="color:#D20">2dg3@Eni6dc</span><span style="color:#710">'</span></span></code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">Factorized code</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">string</span>
<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">get_tables</span>():
    <span style="color:#D42"><span style="color:black">&quot;&quot;&quot;</span><span>Returns tables of character values</span><span style="color:black">&quot;&quot;&quot;</span></span>
    ordered_chars = string.printable
    chars_dictionary = {y:x <span style="color:#080;font-weight:bold">for</span> x, y <span style="color:#080;font-weight:bold">in</span> <span style="color:#369;font-weight:bold">enumerate</span>(ordered_chars)}
    length_of_chars_list = <span style="color:#369;font-weight:bold">len</span>(ordered_chars)
    <span style="color:#080;font-weight:bold">return</span> ordered_chars, chars_dictionary, length_of_chars_list

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">encoder</span>(character_to_encrypt, shift):
    <span style="color:#D42"><span style="color:black">&quot;&quot;&quot;</span><span>Returns the encoded character</span><span style="color:black">&quot;&quot;&quot;</span></span>
    chars_list, chars_dict, length = get_tables()
    crypted_char = chars_list[(chars_dict[character_to_encrypt] + shift) % length]
    <span style="color:#080;font-weight:bold">return</span> crypted_char

<span style="color:#080;font-weight:bold">def</span> <span style="color:#06B;font-weight:bold">encryption</span>(message, cypher):
    <span style="color:#D42"><span style="color:black">&quot;&quot;&quot;</span><span>Returns a message by encrypting it</span><span style="color:black">&quot;&quot;&quot;</span></span>
    crypted_message = []
    <span style="color:#080;font-weight:bold">for</span> char <span style="color:#080;font-weight:bold">in</span> message:
        token = encoder(char, cypher)
        crypted_message.append(token)
    <span style="color:#080;font-weight:bold">return</span> <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#710">'</span></span>.join(crypted_message)

&gt;&gt;&gt; encryption(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">I love Python</span><span style="color:#710">&quot;</span></span>, <span style="color:#00D">123456789</span>)
<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">'</span><span style="color:#D20">yV</span><span style="color:#b0b">\x0c</span><span style="color:#D20">2dg3@Eni6dc</span><span style="color:#710">'</span></span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The code is called the same way and
returns the same result, but the reading is made easier by the simplicity of each function.</p>
</div>
<div class="paragraph">
<p>If a function becomes too complex, reduce it by factoring. Factoring often means adding functions or new parameters to functions.</p>
</div>
</div>
<div class="sect2">
<h3 id="_object_programming_allows_you_to_encapsulate_complexity">Object programming allows you to encapsulate complexity</h3>
<div class="paragraph">
<p>When a program groups several bodies, we can then talk about the concept of objects. Objects are instantiations of classes or interfaces, presenting
characteristics that they can inherit and share with another parent or child object.</p>
</div>
<div class="paragraph">
<p>There are also abstract classes, whose values cannot be
instantiated but they are used to implement functionalities.</p>
</div>
<div class="paragraph">
<p>Objects can interact with each other, following two types
of actions, either aggregation or composition.</p>
</div>
<div class="paragraph">
<p>From objects, design patterns (or DPs) were born, a kind of model encapsulating the complexity of computer code.</p>
</div>
<div class="paragraph">
<p>There is a DP for each object programming problem. They can be combined and bring a lot of elegance to writing code by allowing its complexity to be hidden.</p>
</div>
<div class="paragraph">
<p>They are classified into three main families:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Creational Patterns</p>
</li>
<li>
<p>Structural Patterns</p>
</li>
<li>
<p>Behavioral Patterns</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>If you want to start using DP in Python, I recommend this <a href="https://refactoring.guru/design-patterns">website</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_give_sensible_names_to_variables_and_parameters">Give sensible names to variables and parameters</h3>
<div class="paragraph">
<p>Without turning the tables, everyone will agree that reading
the code is simplified when the variables are not just letters,
even more so if the names cover the role of the variable in the application.</p>
</div>
<div class="paragraph">
<p>Although in python, the interpreter is strongly typed (no need to define the types of your variables), it can be a good idea to end the name of your
variable with its type.</p>
</div>
<div class="paragraph">
<p>Of course, you can go further by declaring the type of the variable, as
in the example below, presenting a mix of possible solutions in Python:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span style="color:#080;font-weight:bold">from</span> <span style="color:#B44;font-weight:bold">io</span> <span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">TextIOWrapper</span>
filename_str: str = <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">my_file.csv</span><span style="color:#710">&quot;</span></span>
<span style="color:#369;font-weight:bold">file</span>: TextIOWrapper = <span style="color:#369;font-weight:bold">open</span>(filename_str, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">r</span><span style="color:#710">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>The interest of declaring the type is not without any meaning, even if it
represents an additional effort, it can allow to control the presence of a
potential bug, in particular with the mypy library in Python.</p>
</div>
</div>
<div class="sect2">
<h3 id="_indent_your_code">Indent your code</h3>
<div class="paragraph">
<p>One of the strengths of the Python language is
to make end-of-line semicolons or function braces superfluous, which are everywhere in other languages, such as C or Java.</p>
</div>
<div class="paragraph">
<p>It is through the indentation of the code that
the Python interpreter understands what it
must do.</p>
</div>
<div class="paragraph">
<p>For us coders, indentation
is often the paradigm of a better understanding of the code.</p>
</div>
<div class="paragraph">
<p>Today, there are tools to
indent the code automatically, whose
main advantage is to avoid the coder having to remember all the rules of
the language, which can be tedious to learn.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_in_the_python_code">In the Python code</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_delete_unused_variables">Delete unused variables</h3>
<div class="paragraph">
<p>During development, the coder tests many
elements and not everyone uses a debugger in their IDE. In fact, there are
numerous reasons why unnecessary variables can appear
when the code evolves, even normally.</p>
</div>
<div class="paragraph">
<p>It is easy to imagine that unused variables,
like dead code, are a hindrance to understanding the code. Therefore,
every coder should spend some time to
go through the code and eliminate what is
no longer useful to the program.</p>
</div>
</div>
<div class="sect2">
<h3 id="_do_not_write_exceptions_without_an_error_type">Do not write exceptions without an Error type</h3>
<div class="paragraph">
<p>Catching exceptions, in Python, is
the royal road to making a program run
despite everything that can happen at runtime.</p>
</div>
<div class="paragraph">
<p>The problem of exceptions offers a
wide spectrum of cases. To convince yourself, just take a look at the
Python documentation, <a href="https://zealdocs.org/">The Zeal software</a> will be,
in this sense, a valuable asset
and will allow you to always have it with you,
offline.</p>
</div>
<div class="listingblock">
<div class="title">Exception handling example</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span style="color:#080;font-weight:bold">try</span>:
    <span style="color:#080;font-weight:bold">with</span> <span style="color:#369;font-weight:bold">open</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">file.txt</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">r</span><span style="color:#710">&quot;</span></span>) <span style="color:#080;font-weight:bold">as</span> <span style="color:#369;font-weight:bold">file</span>:
        content = <span style="color:#369;font-weight:bold">file</span>.read()
<span style="color:#080;font-weight:bold">except</span> FileNotFoundError <span style="color:#080;font-weight:bold">as</span> e:
    print(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">File does not exist: </span><span style="color:#710">&quot;</span></span>, e)
<span style="color:#080;font-weight:bold">finally</span>:
    <span style="color:#080;font-weight:bold">with</span> <span style="color:#369;font-weight:bold">open</span>(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">file.txt</span><span style="color:#710">&quot;</span></span>, <span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">w</span><span style="color:#710">&quot;</span></span>) <span style="color:#080;font-weight:bold">as</span> <span style="color:#369;font-weight:bold">file</span>:
        <span style="color:#369;font-weight:bold">file</span>.write(<span style="background-color:hsla(0,100%,50%,0.05)"><span style="color:#710">&quot;</span><span style="color:#D20">Hello World!</span><span style="color:#710">&quot;</span></span>)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Remember that you are writing code, so
it should be readable and understood by other
coders. Choosing the right exception adds
an element of understanding about the purpose of the
code.</p>
</div>
</div>
<div class="sect2">
<h3 id="_avoid_writing_infinite_loops">Avoid writing infinite loops</h3>
<div class="paragraph">
<p>Although our systems are multi-tasking, infinite loops
are still considered bugs by programmers.</p>
</div>
<div class="paragraph">
<p>While loops like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span style="color:#080;font-weight:bold">while</span> <span style="color:#069">True</span>:
    (action code)</code></pre>
</div>
</div>
<div class="paragraph">
<p>or even:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span style="color:#080;font-weight:bold">while</span> <span style="color:#00D">1</span> == <span style="color:#00D">1</span>:
    (action code)</code></pre>
</div>
</div>
<div class="paragraph">
<p>Are detestable to any coder with a minimum of experience. It is therefore important to always
take the trouble to write coherent and sensible tests, even
during the development phase of a program, where
many tests are performed. This will reduce the
possibility of forgetting an infinite loop in the final code.</p>
</div>
</div>
<div class="sect2">
<h3 id="_writing_unit_tests">Writing unit tests</h3>
<div class="paragraph">
<p>In my own opinion, unit tests are the
least fun part of writing a program. Not only do they require some
effort to find, but choosing the right technical solution among the
different existing products is a challenge.</p>
</div>
<div class="paragraph">
<p>I think it is not for nothing that
program tester is a profession. However, let&#8217;s not forget that their
automation
represents a guarantee of greater stability
of the program, in the face of the challenges that
represents team development,
Agile most of the time.</p>
</div>
<div class="paragraph">
<p>Among the different technical solutions, in Python,
you will find an implementation
in the standard library, through
the functionality <a href="https://docs.python.org/3/library/doctest.html">doctest</a>, which you
can also use, and even more with the standard library <a href="https://docs.python.org/3/library/unittest.html">unittest</a> or the third-party library <a href="https://docs.pytest.org/en/7.4.x/contents.html">pytest</a>.</p>
</div>
<div class="paragraph">
<p>We have presented the most important ones, but an overview of the
existing solutions is available by clicking on this
<a href="https://wiki.python.org/moin/PythonTestingToolsTaxonomy">link</a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_mypy_to_type_variables">Using mypy to type variables</h3>
<div class="paragraph">
<p>Although Python has an interpreter with <a href="https://fr.wikipedia.org/wiki/Duck_typing">duck typing</a>, this could have conditioned it to the rank
of languages ideal for prototyping, but not safe enough
for production phases.</p>
</div>
<div class="paragraph">
<p>However, it is possible to use types, explicitly in the code.
Of course, the interpreter is not directly influenced
by your annotations, but a library
will help you determine the consistency of types,
through the functions of the code:
this is <a href="https://www.mypy-lang.org/examples.html">mypy</a>.</p>
</div>
<div class="paragraph">
<p>Mypy analyzes annotations on variables and
allows you to control them. Writing
code by typing your variables will allow you to write
better quality and more robust code to failures.</p>
</div>
<div class="paragraph">
<p>However, to go further than mypy, it will be
necessary to condition the interpreter,
so that it takes into account the annotations. This can
be done by testing the type of variables at runtime.</p>
</div>
<div class="paragraph">
<p>Python will therefore be more verbose, but the program
will only run in specific cases, which
allows you to exclude errors by limiting the program.</p>
</div>
<div class="paragraph">
<p>To get started with mypy, you can test the type of
the variable by following the function as described in
the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python"><span style="color:#777"># reveal.py</span>
<span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">math</span>
reveal_type(math.pi)</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">mypy reveal.py
/home/user/project/.venv/bin/python -m mypy reveal.py
reveal.py:3: note: Revealed type is &quot;builtins.float&quot;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The quality of your programs will be much better thanks
to mypy and you will be able to increase the complexity
of the processes, without having to worry about bug management.</p>
</div>
</div>
<div class="sect2">
<h3 id="_indenting_your_code_with_the_black_library">Indenting your code with the black library</h3>
<div class="paragraph">
<p>Python is a language with a refined syntax, thanks
to rules on code indentation. The interpreter
understands line breaks and indentation, where
a language like C requires semicolons and braces.</p>
</div>
<div class="paragraph">
<p>However, the rules of the interpreter are not enough
to make Python code readable. This is why the rule <a href="https://peps.python.org/pep-0008/">PEP8</a>
was written by
Python developers: Guido van Rossum, Barry Warsaw,
Alyssa Coghlan.</p>
</div>
<div class="paragraph">
<p>Many IDEs already integrate the PEP8 rules and
will allow you to format your code with one click.
If you don&#8217;t have an IDE at hand, you can use the library <a href="https://pypi.org/project/black/">Black</a>.</p>
</div>
<div class="paragraph">
<p>Just run the following command for the file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">pip install black
python -m black {source_file_or_directory}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Since this library is compatible with jupyter, you
can use it in all your uses of Python code.</p>
</div>
</div>
<div class="sect2">
<h3 id="_do_not_code_a_shallow_copy_if_a_deep_copy_is_necessary">Do not code a shallow copy, if a deep copy is necessary.</h3>
<div class="paragraph">
<p>Copying an object, in computing, can mean copying
a reference or a value.
The exact term is a shallow copy for
copying the reference in memory, and deep copy for copying the
value of the object.</p>
</div>
<div class="paragraph">
<p>Concretely, this difference can lead to abnormal
behavior in a program, where data is moved before being modified.
Indeed, the shallow copy assigns the memory position of a variable to
another variable.
The behavior is as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">&gt;&gt;&gt; a = [<span style="color:#00D">1</span>, <span style="color:#00D">2</span>, <span style="color:#00D">3</span>]
&gt;&gt;&gt; b = a
&gt;&gt;&gt; a.pop()
&gt;&gt;&gt; print(b)
[<span style="color:#00D">1</span>, <span style="color:#00D">2</span>]</code></pre>
</div>
</div>
<div class="paragraph">
<p>This behavior is due to copying the references of a into
b and not the values of a.</p>
</div>
<div class="paragraph">
<p>However, a shallow copy could be used
to update a variable from a second variable. To choose between the
two copy modes, the copy module of
Python, contains a copy function, which returns a
shallow copy. In addition this module
contains a deepcopy function, which returns a
deep copy of an object.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="python">&gt;&gt;&gt; <span style="color:#080;font-weight:bold">import</span> <span style="color:#B44;font-weight:bold">copy</span>
&gt;&gt;&gt; a = [<span style="color:#00D">1</span>, <span style="color:#00D">2</span>, <span style="color:#00D">3</span>]
&gt;&gt;&gt; b = copy.deepcopy(a)
&gt;&gt;&gt; a.pop()
&gt;&gt;&gt; print(b)
[<span style="color:#00D">1</span>, <span style="color:#00D">2</span>, <span style="color:#00D">3</span>]</code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_in_the_sql_code">In the SQL code</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_correctly_type_the_columns_according_to_the_data">Correctly type the columns according to the data</h3>
<div class="paragraph">
<p>There are many different types to categorize data according to the uses they require. Storing
some data consumes more bytes than other data.
This can have a greater impact when storing
blobs or simply when the number of rows exceeds a million.</p>
</div>
<div class="paragraph">
<p>Since the price of storage depends on the size of the tables,
it is good for the wallet to type the fields as close as possible to the type of data represented by the fields. This means
typing a boolean as a boolean and not as an integer, among other things. The savings in big data can be
colossal, ron 800%.</p>
</div>
</div>
<div class="sect2">
<h3 id="_do_not_insert_an_order_by_if_it_is_not_useful">Do not insert an Order By if it is not useful</h3>
<div class="paragraph">
<p>When a query is performed in a test,
it is often useful to order the results
according to a column, or to highlight null values. This sorting is done at the
end of the query, but it adds a significant amount of
calculation during execution.</p>
</div>
<div class="paragraph">
<p>As a general rule, the data is only
in bulk in the tables and in the views as well.
There is very little need
to order them.</p>
</div>
<div class="paragraph">
<p>Given that billing is applied by counting
the amount of data processed by the user,
the order by command should be used in good
intelligence with the real needs of your data
engineering.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_in_hardware">In hardware</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_measuring_program_consumption">Measuring program consumption</h3>
<div class="paragraph">
<p>After optimizing a program, the balance must be found with
the allocated resources. However, the consumables of a program
are measurable, so finding a match remains an achievable goal.</p>
</div>
<div class="paragraph">
<p>The parameters of a program are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The execution time</p>
</li>
<li>
<p>The memory used</p>
</li>
<li>
<p>The disk space used</p>
</li>
<li>
<p>The number of cores</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If the influence of the code is large, the type of process can
by itself define a necessary resource. However, there may be
incompressible parameters depending on the case, such as
the maximum number of simultaneous calls to a server, which
can slow down the execution of the program to a duration that cannot be
reduced.</p>
</div>
<div class="sect3">
<h4 id="_reduce_execution_time">Reduce execution time</h4>
<div class="paragraph">
<p>The ways to reduce execution time are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Simplify the complexity of the program</p>
</li>
<li>
<p>Analyze and optimize the process of each function</p>
</li>
<li>
<p>Opt for multithreading or multiprocessing</p>
</li>
<li>
<p>Take libraries already optimized for your operations</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_reduce_memory_consumption">Reduce memory consumption</h4>
<div class="paragraph">
<p>The ways to reduce memory consumption are:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Writing to disk</p>
</li>
<li>
<p>Destruction of unnecessary variables</p>
</li>
<li>
<p>Data compression</p>
</li>
<li>
<p>Data format</p>
</li>
<li>
<p>Number of libraries</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_locate_servers_as_close_as_possible_to_clients">Locate servers as close as possible to clients</h4>
<div class="paragraph">
<p>Deploying a cloud service server as close as possible to the
users of the service has many advantages in terms of
failure resistance or for regulatory compliance.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s just note that, under an optimization axis,
the latency time will be reduced, so the
proximity of the server will significantly improve the user experience.</p>
</div>
</div>
<div class="sect3">
<h4 id="_reserve_only_the_data_used_by_the_client_for_the_flow">Reserve only the data used by the client for the flow</h4>
<div class="paragraph">
<p>Since data transfer is counted in multiples of bytes,
a lever for improvement that counts for a lot is to ensure that the data
sent to the client is really necessary for it.</p>
</div>
<div class="paragraph">
<p>Similarly, it will probably be useful to carefully
choose the operations performed on the client&#8217;s terminal and the operations calculated by the server.</p>
</div>
<div class="paragraph">
<p>This resonates with the architecture of your
program and should be thought about at the time of its design, because the impacts are numerous in
terms of use.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_developers_posture_without_curvature">The developer&#8217;s posture without curvature</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_avoid_taking_your_hands_off_the_keyboard">Avoid taking your hands off the keyboard</h3>
<div class="paragraph">
<p>To code well, a relaxed posture is
essential.
The ideal posture is the one that causes the least
movement of the shoulders. In this way, they can
stay relaxed.</p>
</div>
<div class="paragraph">
<p>Keeping your elbows resting on your desk, or on the elbow rests of
your chair, will allow you to relax your shoulders.</p>
</div>
<div class="paragraph">
<p>However, to protect your wrists, you will
need to rest them too, but using a wrist rest.</p>
</div>
<div class="sect3">
<h4 id="_vim">VIM</h4>
<div class="paragraph">
<p>Using a VIM plugin in your IDE and learning
a few keyboard shortcuts will allow you to
do without the mouse to move around in your integrated development environment (IDE) while
performing various tasks such as copying/pasting,
searching/replacing character sequences, etc.</p>
</div>
<div class="paragraph">
<p>You can install it on PyCharm by following this <a href="https://www.jetbrains.com/help/pycharm/using-product-as-the-vim-editor.html">documentation</a>,
or on VSCode with this other <a href="https://marketplace.visualstudio.com/items?itemName=vscodevim.vim">documentation</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_learn_an_ergonomic_keyboard_layout">Learn an ergonomic keyboard layout</h3>
<div class="sect3">
<h4 id="_bépo">BÉPO</h4>
<div class="paragraph">
<p>To go further in keyboard ergonomics,
it is advantageous to change to a more ergonomic keyboard layout, because
the AZERTY is not designed to be ergonomic.</p>
</div>
<div class="paragraph">
<p>Indeed, the AZERTY dates back to the era of
typewriters and prevented the hammers of the machine from getting tangled when
professionals used them at full speed.</p>
</div>
<div class="paragraph">
<p>For more than 20 years, there has been a keyboard layout, ergonomic and adapted to the French language:
it was called the BÉPO layout.</p>
</div>
<div class="paragraph">
<p>The BÉPO allows you to limit the movement of the arm, shoulder, wrists and fingers, in particular
by placing the most common letters of French in the center of the keyboard and placing the less used ones on the periphery of the keyboard.</p>
</div>
<div class="paragraph">
<p>5 minutes a day for 2 weeks allows you to type in BÉPO quickly. e
typing will allow you to practice
for free: <a href="https://www.typingsoft.com/all_typing_tutors.htm">All the touch typing tutors</a></p>
</div>
<div class="paragraph">
<p>Then, to use your keyboard, you will no longer
need to look at your hands, which will relax your
vision, moreover, you will use all your
fingers, which will increase your typing speed up to 45 words per minute.</p>
</div>
<div class="paragraph">
<p>To install the BÉPO layout on Windows, this <a href="https://bepo.fr/wiki/Windows">site</a> will show you
the method to follow.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_a_static_code_analysis_tool">Using a static code analysis tool</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_qodana">Qodana</h3>
<div class="paragraph">
<p>To do real in-depth work on your code,
if you use a JetBrains IDE, you will be able to use Qodana, the static
code analysis tool.</p>
</div>
<div class="paragraph">
<p>Qodana is based on JetBrains' native inspections, offering more than 2500 code inspections. It will allow you to detect a wide
variety of problems and can present them in the form of a report.</p>
</div>
</div>
<div class="sect2">
<h3 id="_sonarlint">Sonarlint</h3>
<div class="paragraph">
<p>Here is another solution to obtain the same result,
which connects with most IDEs, through a plugin, <a href="https://www.sonarsource.com/products/sonarlint/ide-login/">Sonarlint</a>. It will allow you
to write clean code. You can use this tool in a CI/CD context by associating it with
<a href="https://docs.sonarsource.com/sonarqube/latest/try-out-sonarqube/">SonarQube</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_conclusion">Conclusion</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The goal of this book is to deliver to you in
about fifteen pages, the essentials to know to write clean code.</p>
</div>
<div class="paragraph">
<p>The principle has been extended to posture, because
it greatly influences the quality of the code,
although indirectly.</p>
</div>
<div class="paragraph">
<p>I really hope that you enjoyed this document and
that it was not painful for you to read it.</p>
</div>
<div class="paragraph">
<p>If you have any remarks or
comments, you can send them to me at the following address <a href="mailto:romain@boyrie.email">romain@boyrie.email</a>.</p>
</div>
<div class="paragraph">
<p>All that remains for me is to wish you "Good Code!"</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-10-06 15:01:13 +0200
</div>
</div>
<script>
;(function () { /*! Asciidoctor Tabs | Copyright (c) 2018-present Dan Allen | MIT License */
  'use strict'

  var config = (document.currentScript || {}).dataset || {}
  var forEach = Array.prototype.forEach

  init(document.querySelectorAll('.tabs'))

  function init (tabsBlocks) {
    if (!tabsBlocks.length) return
    forEach.call(tabsBlocks, function (tabs) {
      var syncIds = tabs.classList.contains('is-sync') ? {} : undefined
      var tablist = tabs.querySelector('.tablist ul')
      tablist.setAttribute('role', 'tablist')
      var start
      forEach.call(tablist.querySelectorAll('li'), function (tab, idx) {
        tab.tabIndex = -1
        tab.setAttribute('role', tab.classList.add('tab') || 'tab')
        var id, anchor, syncId
        if (!(id = tab.id) && (anchor = tab.querySelector('a[id]'))) {
          id = tab.id = anchor.parentNode.removeChild(anchor).id
        }
        var panel = id && tabs.querySelector('.tabpanel[aria-labelledby~="' + id + '"]')
        if (!panel) return idx ? undefined : toggleSelected(tab, true) // invalid state
        syncIds && (((syncId = tab.textContent.trim()) in syncIds) ? (syncId = undefined) : true) &&
        (syncIds[(tab.dataset.syncId = syncId)] = tab)
        idx || (syncIds && (start = { tab: tab, panel: panel })) ? toggleHidden(panel, true) : toggleSelected(tab, true)
        tab.setAttribute('aria-controls', panel.id)
        panel.setAttribute('role', 'tabpanel')
        var onClick = syncId === undefined ? activateTab : activateTabSync
        tab.addEventListener('click', onClick.bind({ tabs: tabs, tab: tab, panel: panel }))
      })
      if (!tabs.closest('.tabpanel')) {
        forEach.call(tabs.querySelectorAll('.tabpanel table.tableblock'), function (table) {
          var container = Object.assign(document.createElement('div'), { className: 'tablecontainer' })
          table.parentNode.insertBefore(container, table).appendChild(table)
        })
      }
      if (start) {
        var syncGroupId
        for (var i = 0, lst = tabs.classList, len = lst.length, className; i !== len; i++) {
          if (!(className = lst.item(i)).startsWith('data-sync-group-id=')) continue
          tabs.dataset.syncGroupId = syncGroupId = lst.remove(className) || className.slice(19).replace(/\u00a0/g, ' ')
          break
        }
        if (syncGroupId === undefined) tabs.dataset.syncGroupId = syncGroupId = Object.keys(syncIds).sort().join('|')
        var preferredSyncId = 'syncStorageKey' in config &&
          window[(config.syncStorageScope || 'local') + 'Storage'].getItem(config.syncStorageKey + '-' + syncGroupId)
        var tab = preferredSyncId && syncIds[preferredSyncId]
        tab && Object.assign(start, { tab: tab, panel: document.getElementById(tab.getAttribute('aria-controls')) })
        toggleSelected(start.tab, true) || toggleHidden(start.panel, false)
      }
    })
    onHashChange()
    toggleClassOnEach(tabsBlocks, 'is-loading', 'remove')
    window.setTimeout(toggleClassOnEach.bind(null, tabsBlocks, 'is-loaded', 'add'), 0)
    window.addEventListener('hashchange', onHashChange)
  }

  function activateTab (e) {
    var tab = this.tab
    var tabs = this.tabs || (this.tabs = tab.closest('.tabs'))
    var panel = this.panel || (this.panel = document.getElementById(tab.getAttribute('aria-controls')))
    querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (el) {
      toggleSelected(el, el === tab)
    })
    querySelectorWithSiblings(tabs, '.tabpanel', 'tabpanel').forEach(function (el) {
      toggleHidden(el, el !== panel)
    })
    if (!this.isSync && 'syncStorageKey' in config && 'syncGroupId' in tabs.dataset) {
      var storageKey = config.syncStorageKey + '-' + tabs.dataset.syncGroupId
      window[(config.syncStorageScope || 'local') + 'Storage'].setItem(storageKey, tab.dataset.syncId)
    }
    if (!e) return
    var loc = window.location
    var hashIdx = loc.hash ? loc.href.indexOf('#') : -1
    if (~hashIdx) window.history.replaceState(null, '', loc.href.slice(0, hashIdx))
    e.preventDefault()
  }

  function activateTabSync (e) {
    activateTab.call(this, e)
    var thisTabs = this.tabs
    var thisTab = this.tab
    var initialY = thisTabs.getBoundingClientRect().y
    forEach.call(document.querySelectorAll('.tabs'), function (tabs) {
      if (tabs === thisTabs || tabs.dataset.syncGroupId !== thisTabs.dataset.syncGroupId) return
      querySelectorWithSiblings(tabs, '.tablist .tab', 'tab').forEach(function (tab) {
        if (tab.dataset.syncId === thisTab.dataset.syncId) activateTab.call({ tabs: tabs, tab: tab, isSync: true })
      })
    })
    var shiftedBy = thisTabs.getBoundingClientRect().y - initialY
    if (shiftedBy && (shiftedBy = Math.round(shiftedBy))) window.scrollBy({ top: shiftedBy, behavior: 'instant' })
  }

  function querySelectorWithSiblings (scope, selector, siblingClass) {
    var el = scope.querySelector(selector)
    if (!el) return []
    var result = [el]
    while ((el = el.nextElementSibling) && el.classList.contains(siblingClass)) result.push(el)
    return result
  }

  function toggleClassOnEach (elements, className, method) {
    forEach.call(elements, function (el) {
      el.classList[method](className)
    })
  }

  function toggleHidden (el, state) {
    el.classList[(el.hidden = state) ? 'add' : 'remove']('is-hidden')
  }

  function toggleSelected (el, state) {
    el.setAttribute('aria-selected', '' + state)
    el.classList[state ? 'add' : 'remove']('is-selected')
    el.tabIndex = state ? 0 : -1
  }

  function onHashChange () {
    var id = window.location.hash.slice(1)
    if (!id) return
    var tab = document.getElementById(~id.indexOf('%') ? decodeURIComponent(id) : id)
    if (!(tab && tab.classList.contains('tab'))) return
    'syncId' in tab.dataset ? activateTabSync.call({ tab: tab }) : activateTab.call({ tab: tab })
  }
})()
</script>
</body>
</html>